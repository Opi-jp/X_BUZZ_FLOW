# ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼ã¨è§£æ±ºç­–

ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯ã€ç¹°ã‚Šè¿”ã—ç™ºç”Ÿã™ã‚‹ã‚¨ãƒ©ãƒ¼ã¨ãã®è§£æ±ºç­–ã‚’è¨˜éŒ²ã—ã¾ã™ã€‚
**åŒã˜ã‚¨ãƒ©ãƒ¼ã§æ™‚é–“ã‚’ç„¡é§„ã«ã—ãªã„ãŸã‚ã«ã€å¿…ãšç¢ºèªã—ã¦ãã ã•ã„ã€‚**

---

## ğŸ”´ DBæ¥ç¶šã‚¨ãƒ©ãƒ¼

### ç—‡çŠ¶
- `Error: Can't reach database server`
- `Invalid prisma.user invocation`
- `The column users.createdAt does not exist`

### åŸå› 
1. DIRECT_URLã¨DATABASE_URLã®è¨­å®šãƒŸã‚¹
2. Prismaã‚¹ã‚­ãƒ¼ãƒã¨å®Ÿéš›ã®DBã®ä¸ä¸€è‡´
3. ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æœªå®Ÿè¡Œ

### è§£æ±ºç­–
```bash
# 1. ç’°å¢ƒå¤‰æ•°ã‚’ç¢ºèª
node scripts/dev-tools/check-env.js

# 2. DBã‚¹ã‚­ãƒ¼ãƒã‚’æ¤œè¨¼
node scripts/dev-tools/db-schema-validator.js

# 3. æ­£ã—ã„è¨­å®šä¾‹ï¼ˆ.env.localï¼‰
DATABASE_URL="postgresql://user:pass@host:6543/postgres?pgbouncer=true"
DIRECT_URL="postgresql://user:pass@host:5432/postgres"
```

### æ ¹æœ¬å¯¾ç­–
- âŒ ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã§å›é¿ã—ãªã„
- âŒ æ‰‹å‹•ã§ã‚«ãƒ©ãƒ ã‚’è¿½åŠ ã—ãªã„
- âœ… Prismaãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹

---

## ğŸ”´ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒæœŸå¾…é€šã‚Šã«å‹•ã‹ãªã„

### ç—‡çŠ¶
- GPTãŒã€Œæ–¹å‘æ€§ã€ã§ã¯ãªãã€Œå®Ÿéš›ã®æŠ•ç¨¿æ–‡ã€ã‚’ç”Ÿæˆã™ã‚‹
- åŒã˜ã‚ˆã†ãªå‡ºåŠ›ã°ã‹ã‚Šã«ãªã‚‹
- JSONãƒ‘ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼

### åŸå› 
1. æŒ‡ç¤ºã‚’JSONã§ç´°ã‹ãæ±ºã‚ã™ãã¦ã„ã‚‹
2. ã€Œç‰©èªæ€§ã®ã‚ã‚‹ã€ãªã©ã®ä¿®é£¾èªã‚’å‰Šé™¤ã—ãŸ
3. ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å‹æ‰‹ã«çœç•¥ãƒ»è¿½åŠ ã—ãŸ

### è§£æ±ºç­–
```javascript
// âŒ æ‚ªã„ä¾‹
const prompt = {
  task: "generate",
  format: "json",
  fields: ["hook", "angle"]
}

// âœ… è‰¯ã„ä¾‹
const prompt = `
ã‚ãªãŸã¯ãƒã‚ºã‚‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æˆ¦ç•¥å®¶ã§ã™ã€‚
ç‰©èªæ€§ã®ã‚ã‚‹é­…åŠ›çš„ãªæŠ•ç¨¿ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

å‡ºåŠ›ã¯ä»¥ä¸‹ã®JSONå½¢å¼ã§ãŠé¡˜ã„ã—ã¾ã™ï¼š
{ "hook": "...", "angle": "..." }
`
```

### æ ¹æœ¬å¯¾ç­–
- è‡ªç„¶æ–‡ã§æŒ‡ç¤ºã€å‡ºåŠ›å½¢å¼ã®ã¿JSONæŒ‡å®š
- ã‚ªãƒªã‚¸ãƒŠãƒ«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‹ã‚‰å‹æ‰‹ã«å¤‰æ›´ã—ãªã„
- `/docs/core/chain-of-thought-specification.md`ã‚’å¿…ãšå‚ç…§

---

## ğŸ”´ APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®æ··ä¹±

### ç—‡çŠ¶
- ã©ã®APIã‚’ä½¿ãˆã°ã„ã„ã‹åˆ†ã‹ã‚‰ãªã„
- åŒã˜æ©Ÿèƒ½ã§è¤‡æ•°ã®APIãŒå­˜åœ¨
- æ–°ã—ã„APIã‚’ä½œã£ãŸã®ã«å¤ã„APIãŒä½¿ã‚ã‚Œã‚‹

### åŸå› 
1. å‘½åè¦å‰‡ãŒçµ±ä¸€ã•ã‚Œã¦ã„ãªã„
2. ç§»è¡Œè¨ˆç”»ãŒä¸æ˜ç¢º
3. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãŒå¤ã„APIã‚’ä½¿ã„ç¶šã‘ã¦ã„ã‚‹

### è§£æ±ºç­–
```bash
# 1. ç¾åœ¨ã®ä½¿ç”¨çŠ¶æ³ã‚’ç¢ºèª
node scripts/dev-tools/api-dependency-scanner.js

# 2. ãƒ¡ã‚¤ãƒ³ã§ä½¿ç”¨ä¸­ã®APIï¼ˆCLAUDE.mdå‚ç…§ï¼‰
ã‚»ãƒƒã‚·ãƒ§ãƒ³: /api/viral/v2/sessions/[id]    # 41ç®‡æ‰€ã§ä½¿ç”¨
ä¸‹æ›¸ã:     /api/viral/v2/drafts/[id]      # ãƒ¡ã‚¤ãƒ³
```

### æ ¹æœ¬å¯¾ç­–
- æ–°æ©Ÿèƒ½å®Ÿè£…æ™‚ã¯æ—¢å­˜APIã‚’ç¢ºèª
- `/docs/api-contracts.md`ã§ä»•æ§˜ç®¡ç†
- ãƒ•ãƒ­ãƒ³ãƒˆã«åˆã‚ã›ã¦APIã‚’é€€åŒ–ã•ã›ãªã„

---

## ğŸ”´ éåŒæœŸå‡¦ç†ã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ

### ç—‡çŠ¶
- continue-asyncãŒ502ã‚¨ãƒ©ãƒ¼
- å‡¦ç†ãŒé€”ä¸­ã§æ­¢ã¾ã‚‹
- Phaseé–“ã§ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãŒå¤±ã‚ã‚Œã‚‹

### åŸå› 
1. Vercelã®å®Ÿè¡Œæ™‚é–“åˆ¶é™ï¼ˆ300ç§’ï¼‰
2. åŒæœŸçš„ãªå‡¦ç†ã§å¾…æ©Ÿã—ã¦ã„ã‚‹
3. ã‚¨ãƒ©ãƒ¼æ™‚ã®ãƒªãƒˆãƒ©ã‚¤ãŒãªã„

### è§£æ±ºç­–
```javascript
// ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å‡¦ç†ã«å¤‰æ›´
setTimeout(async () => {
  await processAsync();
}, 0);

return NextResponse.json({ status: 'processing' });
```

### æ ¹æœ¬å¯¾ç­–
- éåŒæœŸãƒ¯ãƒ¼ã‚«ãƒ¼ã‚’ä½¿ç”¨
- çŠ¶æ…‹ã‚’DBã«ä¿å­˜ã—ã¦ãƒ¬ã‚¸ãƒ¥ãƒ¼ãƒ å¯èƒ½ã«

---

## ğŸ”´ Twitterèªè¨¼ã‚¨ãƒ©ãƒ¼

### ç—‡çŠ¶
- Access Denied
- Bad Authentication data

### åŸå› 
1. ãƒãƒ¼ãƒˆ3000ä»¥å¤–ã§å®Ÿè¡Œã—ã¦ã„ã‚‹
2. ç’°å¢ƒå¤‰æ•°ã®è¨­å®šãƒŸã‚¹
3. Twitter Developer Portalã®è¨­å®š

### è§£æ±ºç­–
```bash
# å¿…ãšãƒãƒ¼ãƒˆ3000ã§å®Ÿè¡Œ
./scripts/dev-persistent.sh

# Callback URLç¢ºèª
http://localhost:3000/api/auth/callback/twitter
```

### æ ¹æœ¬å¯¾ç­–
- NEXTAUTH_URL=http://localhost:3000 å›ºå®š
- ãƒãƒ¼ãƒˆ3000å¿…é ˆã‚’CLAUDE.mdã«æ˜è¨˜æ¸ˆã¿

---

## ğŸ”´ Node.jsãƒ—ãƒ­ã‚»ã‚¹ã®å¤ã„ã‚³ãƒ¼ãƒ‰å®Ÿè¡Œ

### ç—‡çŠ¶
- ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿®æ­£ã—ãŸã®ã«åæ˜ ã•ã‚Œãªã„
- ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ãŒè¿”ã•ã‚Œç¶šã‘ã‚‹
- å¤ã„å‹•ä½œãŒç¶šã

### åŸå› 
- Node.jsãƒ—ãƒ­ã‚»ã‚¹ãŒãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´å¾Œã‚‚å¤ã„ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œ

### è§£æ±ºç­–
```bash
# ãƒ—ãƒ­ã‚»ã‚¹ã‚’å†èµ·å‹•
npm run dev
# ã¾ãŸã¯æ°¸ç¶šã‚µãƒ¼ãƒãƒ¼ã‚’å†èµ·å‹•
./scripts/dev-persistent.sh
```

### æ ¹æœ¬å¯¾ç­–
- ã‚³ãƒ¼ãƒ‰å¤‰æ›´å¾Œã¯å¿…ãšãƒ—ãƒ­ã‚»ã‚¹å†èµ·å‹•
- ãƒ•ã‚¡ã‚¤ãƒ«ã®æ›´æ–°æ™‚åˆ»ã‚’ç¢ºèª

---

## ğŸ”´ Prismaã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¨ãƒ©ãƒ¼

### ç—‡çŠ¶
- `Cannot find module '@prisma/client'`
- `Cannot find module './lib/generated/prisma'`
- `PrismaClient is not a constructor`

### åŸå› 
1. `npx prisma generate`ã‚’å®Ÿè¡Œã—ã¦ã„ãªã„
2. ã‚¹ã‚­ãƒ¼ãƒå¤‰æ›´å¾Œã«å†ç”Ÿæˆã—ã¦ã„ãªã„
3. ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹ãŒé–“é•ã£ã¦ã„ã‚‹

### è§£æ±ºç­–
```bash
# 1. Prismaã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ç”Ÿæˆ
npx prisma generate

# 2. æ­£ã—ã„ã‚¤ãƒ³ãƒãƒ¼ãƒˆï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¨­å®šã«ã‚ˆã‚‹ï¼‰
// âŒ é–“é•ã„
import { PrismaClient } from '@prisma/client'

// âœ… ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ­£ã—ã„ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
import { PrismaClient } from '../lib/generated/prisma'
// ã¾ãŸã¯
import { PrismaClient } from '@/lib/generated/prisma'
```

### æ ¹æœ¬å¯¾ç­–
- package.jsonã®postinstallã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ç¢ºèª
```json
"scripts": {
  "postinstall": "prisma generate"
}
```
- ã‚¹ã‚­ãƒ¼ãƒå¤‰æ›´æ™‚ã¯å¿…ãš`npx prisma generate`

---

## ğŸ“ ã‚¨ãƒ©ãƒ¼è¨˜éŒ²æ–¹æ³•

æ–°ã—ã„ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸã‚‰ï¼š

1. ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«è¿½è¨˜
2. å½¢å¼ï¼š
   - ç—‡çŠ¶ï¼ˆå…·ä½“çš„ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼‰
   - åŸå› ï¼ˆãªãœèµ·ããŸã‹ï¼‰
   - è§£æ±ºç­–ï¼ˆã©ã†ç›´ã—ãŸã‹ï¼‰
   - æ ¹æœ¬å¯¾ç­–ï¼ˆå†ç™ºé˜²æ­¢ç­–ï¼‰

3. ã‚³ãƒŸãƒƒãƒˆ
```bash
git add ERRORS.md
git commit -m "docs: [ã‚¨ãƒ©ãƒ¼å]ã®è§£æ±ºç­–ã‚’è¿½åŠ "
```

---

*æœ€çµ‚æ›´æ–°: 2025/06/18*