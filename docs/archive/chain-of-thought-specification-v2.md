# Chain of Thought 実装仕様書 v2（2025年6月16日更新）

## 🚨 重要な警告
**このドキュメントは、プロンプトの流れを示すものです。**
**これは検索クエリ化の指示ではなく、GPTに与えるプロンプトの構造を示しています。**

## 基本原則

### Chain of Thoughtとは
- **GPTに思考プロセスを踏ませる**技法
- 各フェーズで「どう考えるか」をプロンプトで導き、**GPT自身に判断させる**
- ハードコードされた処理ではなく、**GPTの推論能力を活用**

### 絶対に守るべきルール
1. **プロンプトを削らない** - LLMは自然言語で動作するため、文脈が重要
2. **評価基準をハードコードしない** - GPTに考えさせる
3. **フェーズ間でプロンプトを移動しない** - 各フェーズには明確な役割がある
4. **検索クエリを短くしない** - 自然言語での詳細な質問が必要

## 現在の4フェーズ構成（Phase 2と3がマージ済み）

### Phase 1: トレンド収集

#### Step 1 - Think（検索クエリ生成）
```
# ユーザー設定
* 発信したい分野: {expertise}
* コンテンツのスタイル: {style}
* プラットフォーム: {platform}

# タスク
Perplexityに投げる検索クエリを生成してください
```

#### Step 2 - Execute（Perplexity検索）
自然言語での詳細な質問をPerplexityに投げる

#### Step 3 - Integrate（トレンド分析）
検索結果からバイラルの可能性が高いトピックを特定

### Phase 2: 機会評価＋コンセプト作成（マージ版）

以下のプロンプトで機会評価とコンセプト作成を同時に実行：

```
下記の視点で分析を行い、
A：ウイルス速度指標
- 検索ボリュームの急増と成長率
- ソーシャルメンションの加速
- 複数プラットフォームの存在
- インフルエンサーの採用
- メディア報道の勢い

B：コンテンツアングル識別：実行可能なトレンドごとに、独自の角度を特定します。
- 反対派は世論に異議を唱える
- 専門家による内部視点の分析
- 個人的なつながりの物語
- 教育の内訳
- 次に何が起こるかを予測するコンテンツ
- 舞台裏の洞察
- 過去のイベントとの比較内容

その分析に基づいて、物語性を豊かに、下記の構造に基づいて、3つのコンセプトを提供してください。

●コンテンツコンセプトフレームワーク
それぞれの機会について、以下を開発します
A：形式: [スレッド/ビデオ/投稿タイプ]
B：フック: 「[注目を集める具体的なオープナー]」
C：角度: [独自の視点や見方]

●コンテンツ概要:
トレンドにつながるオープニングフック
[物語を構築する3～5つのキーポイント]
-予期せぬ洞察や啓示
-エンゲージメントを促進するCTA
-タイミング: 最大の効果を得るには [X] 時間以内に投稿してください
-ビジュアル: [具体的な画像/動画の説明]
-ハッシュタグ: [最適化されたタグ]

この際には、コンセプト作成のもととなったニュースソースとURLも必ず提示します。

出力は
A：形式: [スレッド/ビデオ/投稿タイプ]
B：フック: 「[注目を集める具体的なオープナー]」
C：角度: [独自の視点や見方]
D：3〜5個のキーポイント
で出力してください
```

### Phase 3: 実際のコンテンツ作成

```
コンセプト1: [トレンドトピック] - 完全なコンテンツ
[Xにすぐにコピー＆ペースト可能な完全なコンテンツを作成してください]
[すべてのテキスト、書式、改行、絵文字、ハッシュタグを含める]
[完成させてすぐに投稿できるように準備する]
視覚的説明: [必要な画像/ビデオの詳細な説明]
投稿に関する注意事項: [具体的なタイミングと最適化のヒント]

重要：単なる情報伝達ではなく、読者の感情を動かし、共感を生み、シェアしたくなる物語として構成してください。
```

### Phase 4: 実行戦略

```
# 実行戦略
●最適なタイミング戦略:
- 投稿日: [理想的な投稿日と理由]
- 投稿時間: [ピークエンゲージメントタイム]
- フォローアップタイミング: [レスポンスとリツイートのタイミング]

●エンゲージメント戦術:
- 最初の 1 時間：[早期の牽引を構築するための特定のアクション]
- インフルエンサーターゲティング：[タグ付けまたはエンゲージする特定のアカウント]
- コミュニティのエンゲージメント：[返信とディスカッションへの参加戦略]

●指標と最適化:
- 目標指標：[インプレッション、エンゲージメント率、共有]
- A/B テスト要素：[異なるフック、ビジュアル、またはタイミングをテスト]
- 反復戦略：[今後のコンテンツに対する学習の適用]
```

## 重要な変更点

1. **Phase 2と3のマージ**
   - 従来: Phase 2（機会評価）→ Phase 3（コンセプト作成）
   - 現在: Phase 2（機会評価＋コンセプト作成を同時実行）

2. **Phase 1のDについて**
   - Phase 1のStep 1（Think）でA〜Dは質問生成のガイド
   - **Phase 1のDは後のフェーズで使用されない**
   - INTEGRATEステップでDのセクション見出しは不要

3. **物語性の重視**
   - Phase 3（コンテンツ作成）で「物語性のある魅力的な投稿」を強調
   - 読者の感情を動かし、共感を生む内容を重視

## システムプロンプト

全フェーズで統一：
```
あなたは、新たなトレンドを特定し、流行の波がピークに達する前にその波に乗るコンテンツのコンセプトを作成するバズるコンテンツ戦略家です。
```

## 入出力の形式

### 入力
- **自然文での入力**を基本とする
- GPTが理解しやすい自然な日本語でプロンプトを構成

### 出力
- **JSON形式での出力**（DBに保存するため）
- 各フェーズのJSON構造は、次のフェーズで参照・使用される
- プロンプトには必ず「以下のJSON形式で出力してください」を含める

### JSON構造の連携
- Phase 1の出力 → Phase 2に渡す
- Phase 2の出力 → Phase 3に渡す
- Phase 3の出力 → Phase 4に渡す
- 各フェーズは前フェーズの出力JSONを受け取って処理
- DBに保存されたJSONデータをそのまま次のフェーズに渡す

## 実装における注意

- このドキュメントはプロンプトの流れを示すものであり、実装の詳細ではない
- 各フェーズのプロンプトはGPTの思考を導くためのもの
- ハードコードされた処理ロジックではなく、GPTの推論に委ねる
- JSON出力により、フェーズ間のデータ連携を確実に行う