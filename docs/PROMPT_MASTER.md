# プロンプトマスター仕様 v3.0

最終更新: 2025年6月18日

## 🏛️ 第1部：永遠の原則（これは変わらない）

### Chain of Thoughtの本質

Chain of Thought（CoT）は、LLMに「考えさせる」技術です。重要なのは：

- **考えさせる** ＝ 創造的な思考プロセスを促す
- **Chain（連鎖）** ＝ 前の思考が次の思考を導く
- **非決定的** ＝ 同じ入力でも異なる創造的な出力

### 創造性を殺す3つの罠

1. **選択肢の固定化**
   - 悪例：「以下から1つ選んでください」
   - 良例：「以下を参考に、組み合わせも含めて考えてください」

2. **テンプレート化**
   - 悪例：「[導入] → [本論] → [結論]の形式で」
   - 良例：「物語性のある魅力的な流れで」

3. **評価基準のハードコード**
   - 悪例：「スコア80以上のものを選択」
   - 良例：「なぜバズる可能性が高いか説明して」

### プロンプト設計の原則

1. **入力と出力は1:1対応ではない**
   - ガイド部分：「考える材料」（5種類×12種類の可能性）
   - 出力部分：「考えた結果」（選択＋組み合わせ＋理由）

2. **逆算設計の必要性**
   - 各ステップの出力は、次のステップの入力として設計

3. **非関数的な設計**
   - 前後の文脈が重要
   - 物語として一貫したコンテンツ

4. **システムプロンプトの固定**
   ```
   あなたは、新たなトレンドを特定し、流行の波がピークに達する前にその波に乗るコンテンツのコンセプトを作成するバズるコンテンツ戦略家です。
   ```

## 📋 第2部：現在の実装仕様（2025年6月18日版）

### システム構成
- **2トピック × 3コンセプト = 6パターン**
- **3ステップ構成**（旧5フェーズから簡略化）
- **API**: `/api/generation/content/sessions/*`（旧v2から移行）

### Step 1: トピック収集（Perplexity）

```
【{theme}】について【{platform}】において【{style}】で発信するためのバズるコンテンツを作成したいです。

以下の視点でトレンド情報を収集・分析し、直近でバズリそうなトピックを2つ特定してください。その際には判断の元となったニュースソースのURLを明記してください。ニュースソースは複数でも構いません。なお、ニュースソースは48時間以内のものを使用してください。

A：現在の出来事の分析
- {theme}に関する最新ニュース（特に感情的な反応を引き起こしているもの）
- この分野での有名人の発言や事件と、それに対する世間の強い反応
- {theme}に関する政治的議論で意見が分かれているもの

B：テクノロジーの発表とテクノロジードラマ
- {theme}を巡る企業の対立や論争
- {theme}による変化に関する文化的な衝突や社会運動
- 予想外の展開や驚きを生んだ事例
- インターネット上で話題になっているドラマチックな出来事

C：ソーシャルリスニング研究
- {platform}で急速に広がっている{theme}のトレンドやハッシュタグ
- TikTokで話題の{theme}関連のサウンドやチャレンジ
- Redditで感情的な議論が起きている投稿
- 急上昇しているGoogleトレンド
- バズっているYouTube動画
- ニュース記事のコメント欄で熱い議論になっているトピック

D：バイラルパターン認識
特に以下の要素を含むトピックを重点的に探してください：
- 強い意見の対立がある（賛成派vs反対派）
- 感情を強く刺激する（怒り、喜び、驚き、憤慨）
- 多くの人が共感できる体験談
- 思わずシェアしたくなる驚きの事実
- 今すぐ知らないと損するタイムリーな話題
- {platform}文化に合った面白さやミーム性

出力JSON形式：
{
  "TOPIC": "トピックのタイトル",
  "perplexityAnalysis": "なぜこれがバズる可能性があるのか、感情的な要素や対立構造を含めて分析（200文字）",
  "url": "記事のURL",
  "date": "公開日",
  "summary": "記事要約（200文字）"
}
```

### Step 2: コンセプト生成（GPT）

```
# タスク
あなたは、{platform}において{style}でバズるコンテンツのコンセプトを作成する専門家です。
与えられたトピックから、それぞれ3つの異なるアプローチのコンセプトを作成してください。

# トピック情報
{topics}

# コンセプト作成の指針

## フック（5種類）
1. 意外性：予想を裏切る情報、常識の逆転
2. 緊急性・即時性：今すぐ知るべき理由、期限や速報性
3. 自己投影・共感：「これ私だ」と思える内容
4. 数字・ロジック：具体的データ、説得力のある論理
5. 問い・未完性：答えを知りたくなる問いかけ

## 角度（12種類）
1. 反対派の視点
2. 専門家の分析
3. 個人的な体験談
4. 未来予測と可能性
5. 過去の教訓
6. 比較とランキング
7. 隠された真実
8. 実用的なハウツー
9. 感情に訴える物語
10. 社会的インパクト
11. エンターテイメント性
12. 議論を呼ぶ問題提起

## 投稿構造（5段階の物語として設計）
1. オープニングフック：一行目で心を掴む
2. 背景・問題提起：なぜこれが重要か
3. 具体的な中身：メインコンテンツ
4. 内省・共感ポイント：読者との繋がり
5. CTA（行動喚起）：シェア、コメント、行動を促す

# 出力形式

各トピックに対して3つのコンセプトをJSON形式で出力してください。

{
  "topicNumber": 1,
  "concepts": [
    {
      "conceptTitle": "20文字以内のタイトル",
      "format": "single または thread",
      "hook": "選択したフックタイプ",
      "hookCombination": ["メインフック", "サブフック"],
      "angle": "選択した角度",
      "angleCombination": ["メイン角度", "サブ角度"],
      "angleRationale": "なぜこの角度の組み合わせが効果的か",
      "keyPoints": ["ポイント1", "ポイント2", "ポイント3"],
      "structure": {
        "opening": "興味を引く最初の一文の例（驚き・問い・逆説など）",
        "background": "なぜその話が今重要なのか、どんな課題を扱うのか",
        "mainContent": "核心となる情報、データ、洞察、ストーリー",
        "empathy": "読者の感情や経験と結びつける要素",
        "cta": "読者にとってほしい具体的な行動"
      },
      "newsSource": "参照するニュースのタイトル",
      "sourceUrl": "ニュースのURL"
    }
  ]
}

```

### Step 3: コンテンツ生成（Claude）

```
# タスク
あなたは{platform}で{style}な投稿を作成する専門家です。
以下のコンセプトに基づいて、実際の投稿文を作成してください。

# コンセプト情報
{selectedConcept}

# 作成指針

## フォーマット別の指針

### single形式
- 140文字以内で完結
- 絵文字を効果的に使用
- 改行で読みやすく
- ハッシュタグは最大3つ

### thread形式
- 5ツイートで構成（1/5, 2/5...形式）
- 各ツイート140文字以内
- ストーリーの流れを意識
- 最後のツイートにCTA

## キャラクター設定（使用する場合）
{characterProfile}

# 出力形式

{
  "format": "single または thread",
  "mainPost": "single形式の場合の投稿文" または [
    {
      "number": "1/5",
      "content": "ツイート本文",
      "charCount": 95
    }
  ],
  "hashtags": ["ハッシュタグ1", "ハッシュタグ2"],
  "estimatedEngagement": {
    "likes": "予想いいね数の範囲",
    "retweets": "予想RT数の範囲",
    "replies": "予想リプライ数の範囲"
  },
  "postingNotes": "投稿時の注意点やベストタイミング"
}
```

## 🔧 第3部：実装ガイドライン

### やってはいけないこと
1. プロンプトを勝手に削除・簡略化する
2. 「3つのコンセプト×5段階＝15個」のような誤解
3. フロントの都合でプロンプトを変更する
4. 評価基準をハードコードする

### やるべきこと
1. プロンプトの修飾語句を大切にする（「物語性のある」など）
2. 各ステップの出力が次の入力になることを意識
3. LLMの創造性を活かす余地を残す
4. 定期的にプロンプトの効果を検証

### フィールド設計のベストプラクティス
- 明確な名前（conceptTitleなど）
- 適切な型（string, array, object）
- 次工程で必要な情報を含む
- 冗長性を避ける

## 🐛 第4部：トラブルシューティング

### よくある誤解と対策

1. **コンセプトが実際の文章になってしまう問題**
   - 原因：structureフィールドの説明が曖昧
   - 対策：具体的な例を含めた明確な指示

2. **構造の数え方の混乱**
   - 原因：コンセプト数と構造要素数の混同
   - 対策：「3つのコンセプト（各々が5段階構造）」と明記

3. **出力が安定しない**
   - 原因：プロンプトが曖昧
   - 対策：JSON形式を具体例付きで指定

### デバッグチェックリスト
- [ ] システムプロンプトは固定されているか
- [ ] 各ステップの入出力は整合しているか
- [ ] JSON形式は正しく指定されているか
- [ ] structureの各要素が明確に定義されているか

## 📝 第5部：変更履歴

### 2025年6月18日
- V2からgenerationへのパス移行
- 「方向性」という単語を削除し、具体的な要素・例を求める形に変更
- 3つのプロンプト文書を統合（prompt-master-specification.md、prompt-strategy-review-2025-06-17.md、v2-prompt-current-2025-06-18.md）

### 2025年6月17日
- 5フェーズから3ステップへの簡略化
- スレッド形式の改善（1/5形式）

### 2025年6月16日
- 物語構造（5段階）の追加
- キャラクター対応

---

**🚨 重要：このファイルがプロンプトの唯一の真実です。他のプロンプト文書は参照しないこと。**